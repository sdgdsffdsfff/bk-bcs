syntax = "proto3";

import "bk-bscp/internal/protocol/common/common.proto";

package datamanager;

service DataManager {
    rpc QueryAppMetadata(QueryAppMetadataReq) returns (QueryAppMetadataResp) {}

    rpc CreateApp(CreateAppReq) returns (CreateAppResp) {}
    rpc QueryApp(QueryAppReq) returns (QueryAppResp) {}
    rpc QueryAppList(QueryAppListReq) returns (QueryAppListResp) {}
    rpc UpdateApp(UpdateAppReq) returns (UpdateAppResp) {}
    rpc DeleteApp(DeleteAppReq) returns (DeleteAppResp) {}

    rpc CreateTemplateBind(CreateTemplateBindReq) returns (CreateTemplateBindResp) {}
    rpc QueryTemplateBind(QueryTemplateBindReq) returns (QueryTemplateBindResp) {}
    rpc QueryTemplateBindList(QueryTemplateBindListReq) returns (QueryTemplateBindListResp) {}
    rpc DeleteTemplateBind(DeleteTemplateBindReq) returns (DeleteTemplateBindResp) {}

    rpc CreateConfigTemplate(CreateConfigTemplateReq) returns (CreateConfigTemplateResp) {}
    rpc QueryConfigTemplate(QueryConfigTemplateReq) returns (QueryConfigTemplateResp) {}
    rpc QueryConfigTemplateList(QueryConfigTemplateListReq) returns (QueryConfigTemplateListResp) {}
    rpc UpdateConfigTemplate(UpdateConfigTemplateReq) returns (UpdateConfigTemplateResp) {}
    rpc DeleteConfigTemplate(DeleteConfigTemplateReq) returns (DeleteConfigTemplateResp) {}

    rpc CreateConfigTemplateVersion(CreateConfigTemplateVersionReq) returns (CreateConfigTemplateVersionResp) {}
    rpc QueryConfigTemplateVersion(QueryConfigTemplateVersionReq) returns(QueryConfigTemplateVersionResp) {}
    rpc QueryConfigTemplateVersionList(QueryConfigTemplateVersionListReq) returns(QueryConfigTemplateVersionListResp) {}
    rpc UpdateConfigTemplateVersion(UpdateConfigTemplateVersionReq) returns (UpdateConfigTemplateVersionResp) {}
    rpc DeleteConfigTemplateVersion(DeleteConfigTemplateVersionReq) returns (DeleteConfigTemplateVersionResp) {}

    rpc CreateVariableGroup(CreateVariableGroupReq) returns (CreateVariableGroupResp) {}
    rpc QueryVariableGroup(QueryVariableGroupReq) returns(QueryVariableGroupResp) {}
    rpc QueryVariableGroupList(QueryVariableGroupListReq) returns(QueryVariableGroupListResp) {}
    rpc DeleteVariableGroup(DeleteVariableGroupReq) returns (DeleteVariableGroupResp) {}

    rpc CreateVariable(CreateVariableReq) returns (CreateVariableResp) {}
    rpc UpdateVariable(UpdateVariableReq) returns (UpdateVariableResp) {}
    rpc QueryVariable(QueryVariableReq) returns(QueryVariableResp) {}
    rpc QueryVariableList(QueryVariableListReq) returns(QueryVariableListResp) {}
    rpc DeleteVariable(DeleteVariableReq) returns (DeleteVariableResp) {}

    rpc CreateConfig(CreateConfigReq) returns (CreateConfigResp) {}
    rpc QueryConfig(QueryConfigReq) returns (QueryConfigResp) {}
    rpc QueryConfigList(QueryConfigListReq) returns (QueryConfigListResp) {}
    rpc UpdateConfig(UpdateConfigReq) returns (UpdateConfigResp) {}
    rpc DeleteConfig(DeleteConfigReq) returns (DeleteConfigResp) {}

    rpc CreateConfigContent(CreateConfigContentReq) returns (CreateConfigContentResp) {}
    rpc QueryConfigContent(QueryConfigContentReq) returns (QueryConfigContentResp) {}
    rpc QueryConfigContentList(QueryConfigContentListReq) returns (QueryConfigContentListResp) {}
    rpc QueryReleaseConfigContent(QueryReleaseConfigContentReq) returns (QueryReleaseConfigContentResp) {}

    rpc CreateCommit(CreateCommitReq) returns (CreateCommitResp) {}
    rpc QueryCommit(QueryCommitReq) returns (QueryCommitResp) {}
    rpc QueryHistoryCommits(QueryHistoryCommitsReq) returns (QueryHistoryCommitsResp) {}
    rpc UpdateCommit(UpdateCommitReq) returns (UpdateCommitResp) {}
    rpc CancelCommit(CancelCommitReq) returns (CancelCommitResp) {}
    rpc ConfirmCommit(ConfirmCommitReq) returns (ConfirmCommitResp) {}

    rpc CreateMultiCommitWithContent(CreateMultiCommitWithContentReq) returns (CreateMultiCommitWithContentResp) {}
    rpc CreateMultiCommit(CreateMultiCommitReq) returns (CreateMultiCommitResp) {}
    rpc QueryMultiCommit(QueryMultiCommitReq) returns (QueryMultiCommitResp) {}
    rpc QueryHistoryMultiCommits(QueryHistoryMultiCommitsReq) returns (QueryHistoryMultiCommitsResp) {}
    rpc QueryMultiCommitSubList(QueryMultiCommitSubListReq) returns (QueryMultiCommitSubListResp) {}
    rpc UpdateMultiCommit(UpdateMultiCommitReq) returns (UpdateMultiCommitResp) {}
    rpc CancelMultiCommit(CancelMultiCommitReq) returns (CancelMultiCommitResp) {}
    rpc ConfirmMultiCommit(ConfirmMultiCommitReq) returns (ConfirmMultiCommitResp) {}

    rpc CreateRelease(CreateReleaseReq) returns (CreateReleaseResp) {}
    rpc QueryRelease(QueryReleaseReq) returns (QueryReleaseResp) {}
    rpc QueryNewestReleases(QueryNewestReleasesReq) returns (QueryNewestReleasesResp) {}
    rpc QueryHistoryReleases(QueryHistoryReleasesReq) returns (QueryHistoryReleasesResp) {}
    rpc UpdateRelease(UpdateReleaseReq) returns (UpdateReleaseResp) {}
    rpc CancelRelease(CancelReleaseReq) returns (CancelReleaseResp) {}
    rpc RollbackRelease(RollbackReleaseReq) returns (RollbackReleaseResp) {}
    rpc PublishRelease(PublishReleaseReq) returns (PublishReleaseResp) {}

    rpc CreateMultiRelease(CreateMultiReleaseReq) returns (CreateMultiReleaseResp) {}
    rpc QueryMultiRelease(QueryMultiReleaseReq) returns (QueryMultiReleaseResp) {}
    rpc QueryMultiReleaseSubList(QueryMultiReleaseSubListReq) returns (QueryMultiReleaseSubListResp) {}
    rpc UpdateMultiRelease(UpdateMultiReleaseReq) returns (UpdateMultiReleaseResp) {}
    rpc CancelMultiRelease(CancelMultiReleaseReq) returns (CancelMultiReleaseResp) {}
    rpc PublishMultiRelease(PublishMultiReleaseReq) returns (PublishMultiReleaseResp) {}
    rpc RollbackMultiRelease(RollbackMultiReleaseReq) returns (RollbackMultiReleaseResp) {}
    rpc QueryHistoryMultiReleases(QueryHistoryMultiReleasesReq) returns (QueryHistoryMultiReleasesResp) {}

    rpc CreateAppInstance(CreateAppInstanceReq) returns (CreateAppInstanceResp) {}
    rpc UpdateAppInstance(UpdateAppInstanceReq) returns (UpdateAppInstanceResp) {}
    rpc QueryReachableAppInstances(QueryReachableAppInstancesReq) returns (QueryReachableAppInstancesResp) {}
    rpc CreateAppInstanceRelease(CreateAppInstanceReleaseReq) returns (CreateAppInstanceReleaseResp) {}
    rpc QueryAppInstanceRelease(QueryAppInstanceReleaseReq) returns (QueryAppInstanceReleaseResp) {}
    rpc QueryEffectedAppInstances(QueryEffectedAppInstancesReq) returns (QueryEffectedAppInstancesResp) {}
    rpc QueryMatchedAppInstances(QueryMatchedAppInstancesReq) returns (QueryMatchedAppInstancesResp) {}

    rpc CreateStrategy(CreateStrategyReq) returns (CreateStrategyResp) {}
    rpc QueryStrategy(QueryStrategyReq) returns (QueryStrategyResp) {}
    rpc QueryStrategyList(QueryStrategyListReq) returns (QueryStrategyListResp) {}
    rpc DeleteStrategy(DeleteStrategyReq) returns (DeleteStrategyResp) {}

    rpc CreateProcAttr(CreateProcAttrReq) returns (CreateProcAttrResp) {}
    rpc QueryHostProcAttr(QueryHostProcAttrReq) returns (QueryHostProcAttrResp) {}
    rpc QueryHostProcAttrList(QueryHostProcAttrListReq) returns (QueryHostProcAttrListResp) {}
    rpc QueryAppProcAttrList(QueryAppProcAttrListReq) returns (QueryAppProcAttrListResp) {}
    rpc UpdateProcAttr(UpdateProcAttrReq) returns (UpdateProcAttrResp) {}
    rpc DeleteProcAttr(DeleteProcAttrReq) returns (DeleteProcAttrResp) {}

    rpc InitShardingDB(InitShardingDBReq) returns (InitShardingDBResp) {}
    rpc CreateShardingDB(CreateShardingDBReq) returns (CreateShardingDBResp) {}
    rpc QueryShardingDB(QueryShardingDBReq) returns (QueryShardingDBResp) {}
    rpc QueryShardingDBList(QueryShardingDBListReq) returns (QueryShardingDBListResp) {}
    rpc UpdateShardingDB(UpdateShardingDBReq) returns (UpdateShardingDBResp) {}

    rpc CreateSharding(CreateShardingReq) returns (CreateShardingResp) {}
    rpc QuerySharding(QueryShardingReq) returns (QueryShardingResp) {}
    rpc QueryShardingList(QueryShardingListReq) returns (QueryShardingListResp) {}
    rpc UpdateSharding(UpdateShardingReq) returns (UpdateShardingResp) {}

    rpc CreateAudit(CreateAuditReq) returns (CreateAuditResp) {}
    rpc QueryAuditList(QueryAuditListReq) returns (QueryAuditListResp) {}

    rpc Healthz(HealthzReq) returns (HealthzResp) {}
}

message QueryAppMetadataReq {
    string seq    = 1;
    string biz_id = 2;
    string app_id = 3;
}

message QueryAppMetadataResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateAppReq {
    string seq         = 1;
    string biz_id      = 2;
    string app_id      = 3;
    string name        = 4;
    int32  deploy_type = 5;
    int32  state       = 6;
    string creator     = 7;
    string memo        = 8;
}

message CreateAppResp {
    message RespData {
        string app_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryAppReq {
    string seq    = 1;
    string biz_id = 2;
    string app_id = 3;
    string name   = 4;
}

message QueryAppResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    common.App     data    = 4;
}

message QueryAppListReq {
    string      seq    = 1;
    string      biz_id = 2;
    common.Page page   = 3;
}

message QueryAppListResp {
    message RespData {
        uint32              total_count = 1;
        repeated common.App info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateAppReq {
    string seq         = 1;
    string biz_id      = 2;
    string app_id      = 3;
    string name        = 4;
    int32  deploy_type = 5;
    string memo        = 6;
    int32  state       = 7;
    string operator    = 8;
}

message UpdateAppResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message DeleteAppReq {
    string seq      = 1;
    string biz_id   = 2;
    string app_id   = 3;
    string operator = 4;
}

message DeleteAppResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateTemplateBindReq {
    string seq         = 1;
    string biz_id      = 2;
    string template_id = 3;
    string app_id      = 4;
    string cfg_id      = 5;
    int32  state       = 6;
    string creator     = 7;
}

message CreateTemplateBindResp {
    message RespData {
        string cfg_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryTemplateBindReq {
    string seq         = 1;
    string biz_id      = 2;
    string template_id = 3;
    string app_id      = 4;
    string cfg_id      = 5;
}

message QueryTemplateBindResp {
    string              seq     = 1;
    common.ErrCode      code    = 2;
    string              message = 3;
    common.TemplateBind data    = 4;
}

message QueryTemplateBindListReq {
    string      seq         = 1;
    string      biz_id      = 2;
    string      template_id = 3;
    string      app_id      = 4;
    common.Page page        = 5;
}

message QueryTemplateBindListResp {
    message RespData {
        uint32                       total_count = 1;
        repeated common.TemplateBind info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message DeleteTemplateBindReq {
    string seq         = 1;
    string biz_id      = 2;
    string template_id = 3;
    string app_id      = 4;
    string cfg_id      = 5;
    string operator    = 6;
}

message DeleteTemplateBindResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateConfigTemplateReq {
    string seq            = 1;
    string template_id    = 2;
    string biz_id         = 3;
    string name           = 4;
    string cfg_name       = 5;
    string cfg_fpath      = 6;
    string user           = 7;
    string user_group     = 8;
    string file_privilege = 9;
    string file_format    = 10;
    int32  file_mode      = 11;
    int32  engine_type    = 12;
    string memo           = 13;
    int32  state          = 14;
    string creator        = 15;
}

message CreateConfigTemplateResp {
    message RespData {
        string template_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryConfigTemplateReq {
    string seq         = 1;
    string biz_id      = 2;
    string template_id = 3;
}

message QueryConfigTemplateResp {
    string                seq     = 1;
    common.ErrCode        code    = 2;
    string                message = 3;
    common.ConfigTemplate data    = 4;
}

message QueryConfigTemplateListReq {
    string      seq    = 1;
    string      biz_id = 2;
    common.Page page   = 3;
}

message QueryConfigTemplateListResp {
    message RespData {
        uint32                         total_count = 1;
        repeated common.ConfigTemplate info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateConfigTemplateReq {
    string seq            = 1;
    string biz_id         = 2;
    string template_id    = 3;
    string name           = 4;
    string cfg_name       = 5;
    string cfg_fpath      = 6;
    string user           = 7;
    string user_group     = 8;
    string file_privilege = 9;
    string file_format    = 10;
    int32  file_mode      = 11;
    int32  engine_type    = 12;
    string memo           = 13;
    int32  state          = 14;
    string operator       = 15;
}

message UpdateConfigTemplateResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message DeleteConfigTemplateReq {
    string seq         = 1;
    string biz_id      = 2;
    string template_id = 3;
    string operator    = 4;
}

message DeleteConfigTemplateResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateConfigTemplateVersionReq {
    string seq          = 1;
    string version_id   = 2;
    string biz_id       = 3;
    string template_id  = 4;
    string version_tag  = 5;
    string content_id   = 6;
    uint32 content_size = 7;
    string memo         = 8;
    int32  state        = 9;
    string creator      = 10;
}

message CreateConfigTemplateVersionResp {
    message RespData {
        string version_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryConfigTemplateVersionReq {
    string seq        = 1;
    string biz_id     = 2;
    string version_id = 3;
}

message QueryConfigTemplateVersionResp {
    string                       seq     = 1;
    common.ErrCode               code    = 2;
    string                       message = 3;
    common.ConfigTemplateVersion data    = 4;
}

message QueryConfigTemplateVersionListReq {
    string      seq         = 1;
    string      biz_id      = 2;
    string      template_id = 3;
    common.Page page        = 4;
}

message QueryConfigTemplateVersionListResp {
    message RespData {
        uint32                                total_count = 1;
        repeated common.ConfigTemplateVersion info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateConfigTemplateVersionReq {
    string seq          = 1;
    string biz_id       = 2;
    string version_id   = 3;
    string content_id   = 4;
    uint32 content_size = 5;
    string memo         = 6;
    int32  state        = 7;
    string operator     = 8;
}

message UpdateConfigTemplateVersionResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message DeleteConfigTemplateVersionReq {
    string seq        = 1;
    string biz_id     = 2;
    string version_id = 3;
    string operator   = 4;
}

message DeleteConfigTemplateVersionResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateVariableGroupReq {
    string seq          = 1;
    string biz_id       = 2;
    string var_group_id = 3;
    string name         = 4;
    string memo         = 5;
    string creator      = 6;
}

message CreateVariableGroupResp {
    message RespData {
        string var_group_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryVariableGroupReq {
    string seq          = 1;
    string biz_id       = 2;
    string var_group_id = 3;
    string name         = 4;
}

message QueryVariableGroupResp {
    string               seq     = 1;
    common.ErrCode       code    = 2;
    string               message = 3;
    common.VariableGroup data    = 4;
}

message QueryVariableGroupListReq {
    string seq       = 1;
    string biz_id    = 2;
    common.Page page = 3;
}

message QueryVariableGroupListResp {
    message RespData {
        uint32                        total_count = 1;
        repeated common.VariableGroup info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message DeleteVariableGroupReq {
    string seq          = 1;
    string biz_id       = 2;
    string var_group_id = 3;
    string operator     = 4;
}

message DeleteVariableGroupResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateVariableReq {
    string seq          = 1;
    string biz_id       = 2;
    string var_id       = 3;
    string name         = 4;
    string value        = 5;
    string var_group_id = 6;
    string creator      = 7;
}

message CreateVariableResp {
    message RespData {
        string var_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateVariableReq {
    string seq      = 1;
    string biz_id   = 2;
    string var_id   = 3;
    string value    = 4;
    string operator = 5;
}

message UpdateVariableResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message QueryVariableReq {
    string seq          = 1;
    string biz_id       = 2;
    string var_id       = 3;
    string var_group_id = 4;
    string name         = 5;
}

message QueryVariableResp {
    string          seq     = 1;
    common.ErrCode  code    = 2;
    string          message = 3;
    common.Variable data    = 4;
}

message QueryVariableListReq {
    string seq          = 1;
    string biz_id       = 2;
    string var_group_id = 3;
    common.Page page    = 4;
}

message QueryVariableListResp {
    message RespData {
        uint32                   total_count = 1;
        repeated common.Variable info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message DeleteVariableReq {
    string seq      = 1;
    string biz_id   = 2;
    string var_id   = 3;
    string operator = 4;
}

message DeleteVariableResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateConfigReq {
    string seq            = 1;
    string biz_id         = 2;
    string app_id         = 3;
    string cfg_id         = 4;
    string name           = 5;
    string fpath          = 6;
    string user           = 7;
    string user_group     = 8;
    string file_privilege = 9;
    string file_format    = 10;
    int32  file_mode      = 11;
    int32  state          = 12;
    string creator        = 13;
    string memo           = 14;
}

message CreateConfigResp {
    message RespData {
        string cfg_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryConfigReq {
    string seq    = 1;
    string biz_id = 2;
    string app_id = 3;
    string cfg_id = 4;
    string name   = 5;
    string fpath  = 6;
}

message QueryConfigResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    common.Config  data    = 4;
}

message QueryConfigListReq {
    string      seq         = 1;
    string      biz_id      = 2;
    string      app_id      = 3;
    string      app_name    = 4;
    common.Page page        = 5;
    int32       query_type  = 6;
}

message QueryConfigListResp {
    message RespData {
        uint32                 total_count = 1;
        repeated common.Config info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateConfigReq {
    string seq            = 1;
    string biz_id         = 2;
    string cfg_id         = 3;
    string name           = 4;
    string fpath          = 5;
    string user           = 6;
    string user_group     = 7;
    string file_privilege = 8;
    string file_format    = 9;
    int32  file_mode      = 10;
    string memo           = 11;
    int32  state          = 12;
    string operator       = 13;
}

message UpdateConfigResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message DeleteConfigReq {
    string seq      = 1;
    string biz_id   = 2;
    string cfg_id   = 3;
    string operator = 4;
}

message DeleteConfigResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateConfigContentReq {
    string seq          = 1;
    string biz_id       = 2;
    string app_id       = 3;
    string cfg_id       = 4;
    string commit_id    = 5;
    string index        = 6;
    string content_id   = 7;
    uint32 content_size = 8;
    string creator      = 9;
    string memo         = 10;
    int32  state        = 11;
}

message CreateConfigContentResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message QueryConfigContentReq {
    string              seq       = 1;
    string              biz_id    = 2;
    string              app_id    = 3;
    string              cfg_id    = 4;
    string              commit_id = 5;
    map<string, string> labels    = 6;
}

message QueryConfigContentResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    common.Content data    = 4;
}

message QueryReleaseConfigContentReq {
    string              seq       = 1;
    string              biz_id    = 2;
    string              app_id    = 3;
    string              cloud_id  = 4;
    string              ip        = 5;
    string              path      = 6;
    map<string, string> labels    = 7;
    string              cfg_id    = 8;
    string              commit_id = 9;
}

message QueryReleaseConfigContentResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    common.Content data    = 4;
}

message QueryConfigContentListReq {
    string      seq       = 1;
    string      biz_id    = 2;
    string      app_id    = 3;
    string      cfg_id    = 4;
    string      commit_id = 5;
    common.Page page      = 6;
}

message QueryConfigContentListResp {
    message RespData {
        uint32                  total_count = 1;
        repeated common.Content info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message CreateCommitReq {
    string seq             = 1;
    string biz_id          = 2;
    string app_id          = 3;
    string commit_id       = 4;
    string cfg_id          = 5;
    int32  commit_mode     = 6;
    string operator        = 7;
    string multi_commit_id = 8;
    string memo            = 9;
    int32  state           = 10;
}

message CreateCommitResp {
    message RespData {
        string commit_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryCommitReq {
    string seq       = 1;
    string biz_id    = 2;
    string commit_id = 3;
}

message QueryCommitResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    common.Commit  data    = 4;
}

message QueryHistoryCommitsReq {
    string      seq        = 1;
    string      biz_id     = 2;
    string      app_id     = 3;
    string      cfg_id     = 4;
    string      operator   = 5;
    int32       query_type = 6;
    common.Page page       = 7;
}

message QueryHistoryCommitsResp {
    message RespData {
        uint32                 total_count = 1;
        repeated common.Commit info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateCommitReq {
    string seq         = 1;
    string biz_id      = 2;
    string commit_id   = 3;
    int32  commit_mode = 4;
    string operator    = 5;
    string memo        = 6;
}

message UpdateCommitResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CancelCommitReq {
    string seq       = 1;
    string biz_id    = 2;
    string commit_id = 3;
    string operator  = 4;
}

message CancelCommitResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message ConfirmCommitReq {
    string seq       = 1;
    string biz_id    = 2;
    string commit_id = 3;
    string operator  = 4;
}

message ConfirmCommitResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateMultiCommitWithContentReq {
    string                                    seq             = 1;
    string                                    biz_id          = 2;
    string                                    app_id          = 3;
    string                                    multi_commit_id = 4;
    string                                    memo            = 5;
    string                                    operator        = 6;
    repeated common.CommitMetadataWithContent metadatas       = 7;
}

message CreateMultiCommitWithContentResp {
    message RespData {
        string multi_commit_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message CreateMultiCommitReq {
    string                         seq             = 1;
    string                         biz_id          = 2;
    string                         app_id          = 3;
    string                         multi_commit_id = 4;
    string                         memo            = 5;
    string                         operator        = 6;
    repeated common.CommitMetadata metadatas       = 7;
}

message CreateMultiCommitResp {
    message RespData {
        string multi_commit_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryMultiCommitReq {
    string seq             = 1;
    string biz_id          = 2;
    string multi_commit_id = 3;
}

message QueryMultiCommitResp {
    string             seq     = 1;
    common.ErrCode     code    = 2;
    string             message = 3;
    common.MultiCommit data    = 4;
}

message QueryHistoryMultiCommitsReq {
    string      seq        = 1;
    string      biz_id     = 2;
    string      app_id     = 3;
    string      operator   = 4;
    int32       query_type = 5;
    common.Page page       = 6;
}

message QueryHistoryMultiCommitsResp {
    message RespData {
        uint32                      total_count = 1;
        repeated common.MultiCommit info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryMultiCommitSubListReq {
    string seq             = 1;
    string biz_id          = 2;
    string multi_commit_id = 3;
}

message QueryMultiCommitSubListResp {
    message RespData {
        repeated string commit_ids = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateMultiCommitReq {
    string seq             = 1;
    string biz_id          = 2;
    string multi_commit_id = 3;
    string memo            = 4;
    string operator        = 5;
}

message UpdateMultiCommitResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CancelMultiCommitReq {
    string seq             = 1;
    string biz_id          = 2;
    string multi_commit_id = 3;
    string operator        = 4;
}

message CancelMultiCommitResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message ConfirmMultiCommitReq {
    string seq             = 1;
    string biz_id          = 2;
    string multi_commit_id = 3;
    string operator        = 4;
}

message ConfirmMultiCommitResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateReleaseReq {
    string seq              = 1;
    string biz_id           = 2;
    string release_id       = 3;
    string name             = 4;
    string app_id           = 5;
    string cfg_id           = 6;
    string cfg_name         = 7;
    string cfg_fpath        = 8;
    string user             = 9;
    string user_group       = 10;
    string file_privilege   = 11;
    string file_format      = 12;
    int32  file_mode        = 13;
    string strategy_id      = 14;
    string strategies       = 15;
    string commit_id        = 16;
    string multi_release_id = 17;
    string memo             = 18;
    string creator          = 19;
    int32  state            = 20;
}

message CreateReleaseResp {
    message RespData {
        string release_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryReleaseReq {
    string seq        = 1;
    string biz_id     = 2;
    string release_id = 3;
}

message QueryReleaseResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    common.Release data    = 4;
}

message QueryNewestReleasesReq {
    string      seq              = 1;
    string      biz_id           = 2;
    string      cfg_id           = 3;
    string      local_release_id = 4;
    common.Page page             = 5;
}

message QueryNewestReleasesResp {
    message RespData {
        repeated common.Release info = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryHistoryReleasesReq {
    string      seq        = 1;
    string      biz_id     = 2;
    string      cfg_id     = 3;
    string      operator   = 4;
    int32       query_type = 5;
    int32       order_type = 6;
    common.Page page       = 7;
}

message QueryHistoryReleasesResp {
    message RespData {
        uint32                  total_count = 1;
        repeated common.Release info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateReleaseReq {
    string seq        = 1;
    string biz_id     = 2;
    string release_id = 3;
    string name       = 4;
    string memo       = 5;
    string operator   = 6;
}

message UpdateReleaseResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CancelReleaseReq {
    string seq        = 1;
    string biz_id     = 2;
    string release_id = 3;
    string operator   = 4;
}

message CancelReleaseResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message RollbackReleaseReq {
    string seq        = 1;
    string biz_id     = 2;
    string release_id = 3;
    string operator   = 4;
}

message RollbackReleaseResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message PublishReleaseReq {
    string seq        = 1;
    string biz_id     = 2;
    string release_id = 3;
    string operator   = 4;
}

message PublishReleaseResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateMultiReleaseReq {
    string seq              = 1;
    string biz_id           = 2;
    string app_id           = 3;
    string multi_release_id = 4;
    string name             = 5;
    string multi_commit_id  = 6;
    string strategy_id      = 7;
    string strategies       = 8;
    string memo             = 9;
    string creator          = 10;
}

message CreateMultiReleaseResp {
    message RespData {
        string multi_release_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryMultiReleaseReq {
    string seq              = 1;
    string biz_id           = 2;
    string multi_release_id = 3;
}

message QueryMultiReleaseResp {
    string              seq     = 1;
    common.ErrCode      code    = 2;
    string              message = 3;
    common.MultiRelease data    = 4;
}

message QueryHistoryMultiReleasesReq {
    string      seq        = 1;
    string      biz_id     = 2;
    string      app_id     = 3;
    string      operator   = 4;
    int32       query_type = 5;
    int32       order_type = 6;
    common.Page page       = 7;
}

message QueryHistoryMultiReleasesResp {
    message RespData {
        uint32                       total_count = 1;
        repeated common.MultiRelease info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateMultiReleaseReq {
    string seq              = 1;
    string biz_id           = 2;
    string multi_release_id = 3;
    string name             = 4;
    string memo             = 5;
    string operator         = 6;
}

message UpdateMultiReleaseResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message QueryMultiReleaseSubListReq {
    string seq              = 1;
    string biz_id           = 2;
    string multi_release_id = 3;
}

message QueryMultiReleaseSubListResp {
    message RespData {
        repeated string release_ids = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message CancelMultiReleaseReq {
    string seq              = 1;
    string biz_id           = 2;
    string multi_release_id = 3;
    string operator         = 4;
}

message CancelMultiReleaseResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message PublishMultiReleaseReq {
    string seq              = 1;
    string biz_id           = 2;
    string multi_release_id = 3;
    string operator         = 4;
}

message PublishMultiReleaseResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message RollbackMultiReleaseReq {
    string seq              = 1;
    string biz_id           = 2;
    string multi_release_id = 3;
    string operator         = 4;
}

message RollbackMultiReleaseResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateAppInstanceReq {
    string seq       = 1;
    string biz_id    = 2;
    string app_id    = 3;
    string cloud_id  = 4;
    string ip        = 5;
    string path      = 6;
    string labels    = 7;
    int32  state     = 8;
}

message CreateAppInstanceResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message QueryReachableAppInstancesReq {
    string                    seq        = 1;
    string                    biz_id     = 2;
    string                    app_id     = 3;
    repeated common.LabelsMap labels_or  = 4;
    repeated common.LabelsMap labels_and = 5;
    common.Page               page       = 6;
}

message QueryReachableAppInstancesResp {
    message RespData {
        uint32                      total_count = 1;
        repeated common.AppInstance info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateAppInstanceReq {
    string seq      = 1;
    string biz_id   = 2;
    string app_id   = 3;
    string cloud_id = 4;
    string ip       = 5;
    string path     = 6;
    string labels   = 7;
    int32  state    = 8;
}

message UpdateAppInstanceResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateAppInstanceReleaseReq {
    string                     seq      = 1;
    string                     biz_id   = 2;
    string                     app_id   = 3;
    string                     cloud_id = 4;
    string                     ip       = 5;
    string                     path     = 6;
    string                     labels   = 7;
    repeated common.ReportInfo infos    = 8;
}

message CreateAppInstanceReleaseResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message QueryAppInstanceReleaseReq {
    string seq      = 1;
    string biz_id   = 2;
    string app_id   = 3;
    string cloud_id = 4;
    string ip       = 5;
    string path     = 6;
    string cfg_id   = 7;
}

message QueryAppInstanceReleaseResp {
    message RespData {
        string content_id       = 1;
        uint32 content_size     = 2;
        string release_id       = 3;
        string commit_id        = 4;
        string multi_release_id = 5;
        string multi_commit_id  = 6;
        string release_name     = 7;
        string memo             = 8;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryMatchedAppInstancesReq {
    string      seq         = 1;
    string      biz_id      = 2;
    string      app_id      = 3;
    string      strategy_id = 4;
    common.Page page        = 5;
}

message QueryMatchedAppInstancesResp {
    message RespData {
        uint32                      total_count = 1;
        repeated common.AppInstance info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryEffectedAppInstancesReq {
    string      seq        = 1;
    string      biz_id     = 2;
    string      cfg_id     = 3;
    string      release_id = 4;
    common.Page page       = 5;
}

message QueryEffectedAppInstancesResp {
    message RespData {
        uint32                             total_count = 1;
        repeated common.AppInstanceRelease info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message CreateStrategyReq {
    string seq         = 1;
    string biz_id      = 2;
    string app_id      = 3;
    string strategy_id = 4;
    string name        = 5;
    string content     = 6;
    string memo        = 7;
    string creator     = 8;
}

message CreateStrategyResp {
    message RespData {
        string strategy_id = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryStrategyReq {
    string seq         = 1;
    string biz_id      = 2;
    string app_id      = 3;
    string strategy_id = 4;
    string name        = 5;
}

message QueryStrategyResp {
    string          seq     = 1;
    common.ErrCode  code    = 2;
    string          message = 3;
    common.Strategy data    = 4;
}

message QueryStrategyListReq {
    string      seq      = 1;
    string      biz_id   = 2;
    string      app_id   = 3;
    string      app_name = 4;
    common.Page page     = 5;
}

message QueryStrategyListResp {
    message RespData {
        uint32                   total_count = 1;
        repeated common.Strategy info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message DeleteStrategyReq {
    string seq         = 1;
    string biz_id      = 2;
    string strategy_id = 3;
    string operator    = 4;
}

message DeleteStrategyResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateProcAttrReq {
    string seq      = 1;
    string cloud_id = 2;
    string ip       = 3;
    string biz_id   = 4;
    string app_id   = 5;
    string labels   = 6;
    string path     = 7;
    string creator  = 8;
    string memo     = 9;
    bool   override = 10;
}

message CreateProcAttrResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message QueryHostProcAttrReq {
    string seq      = 1;
    string cloud_id = 2;
    string ip       = 3;
    string biz_id   = 4;
    string app_id   = 5;
    string path     = 6;
}

message QueryHostProcAttrResp {
    string          seq     = 1;
    common.ErrCode  code    = 2;
    string          message = 3;
    common.ProcAttr data    = 4;
}

message QueryHostProcAttrListReq {
    string      seq      = 1;
    string      cloud_id = 2;
    string      ip       = 3;
    common.Page page     = 4;
}

message QueryHostProcAttrListResp {
    message RespData {
        uint32                   total_count = 1;
        repeated common.ProcAttr info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message QueryAppProcAttrListReq {
    string      seq    = 1;
    string      biz_id = 2;
    string      app_id = 3;
    common.Page page   = 4;
}

message QueryAppProcAttrListResp {
    message RespData {
        uint32                   total_count = 1;
        repeated common.ProcAttr info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateProcAttrReq {
    string seq      = 1;
    string cloud_id = 2;
    string ip       = 3;
    string biz_id   = 4;
    string app_id   = 5;
    string path     = 6;
    string labels   = 7;
    string memo     = 8;
    string operator = 9;
}

message UpdateProcAttrResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message DeleteProcAttrReq {
    string seq       = 1;
    string cloud_id  = 2;
    string ip        = 3;
    string biz_id    = 4;
    string app_id    = 5;
    string path      = 6;
    string operator  = 7;
}

message DeleteProcAttrResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message InitShardingDBReq {
    string seq = 1;
}

message InitShardingDBResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateShardingDBReq {
    string seq      = 1;
    string db_id    = 2;
    string host     = 3;
    int32  port     = 4;
    string user     = 5;
    string password = 6;
    string memo     = 7;
    int32  state    = 8;
}

message CreateShardingDBResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message QueryShardingDBReq {
    string seq   = 1;
    string db_id = 2;
}

message QueryShardingDBResp {
    string            seq     = 1;
    common.ErrCode    code    = 2;
    string            message = 3;
    common.ShardingDB data    = 4;
}

message QueryShardingDBListReq {
    string seq = 1;
}

message QueryShardingDBListResp {
    message RespData {
        repeated common.ShardingDB info = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateShardingDBReq {
    string seq      = 1;
    string db_id    = 2;
    string host     = 3;
    int32  port     = 4;
    string user     = 5;
    string password = 6;
    string memo     = 7;
    int32  state    = 8;
}

message UpdateShardingDBResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateShardingReq {
    string seq     = 1;
    string key     = 2;
    string db_id   = 3;
    string db_name = 4;
    string memo    = 5;
    int32  state   = 6;
}

message CreateShardingResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message QueryShardingReq {
    string seq = 1;
    string key = 2;
}

message QueryShardingResp {
    string          seq     = 1;
    common.ErrCode  code    = 2;
    string          message = 3;
    common.Sharding data    = 4;
}

message QueryShardingListReq {
    string seq = 1;
}

message QueryShardingListResp {
    message RespData {
        repeated common.Sharding info = 1;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message UpdateShardingReq {
    string seq     = 1;
    string key     = 2;
    string db_id   = 3;
    string db_name = 4;
    string memo    = 5;
    int32  state   = 6;
}

message UpdateShardingResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message CreateAuditReq {
    string seq         = 1;
    int32  source_type = 2;
	int32  op_type     = 3;
	string biz_id      = 4;
	string source_id   = 5;
	string operator    = 6;
	string memo        = 7;
	int32  state       = 8;
}

message CreateAuditResp {
    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
}

message QueryAuditListReq {
    string      seq         = 1;
    string      biz_id      = 2;
    int32       source_type = 3;
    int32       op_type     = 4;
    string      source_id   = 5;
    string      operator    = 6;
    common.Page page        = 7;
}

message QueryAuditListResp {
    message RespData {
        uint32                total_count = 1;
        repeated common.Audit info        = 2;
    }

    string         seq     = 1;
    common.ErrCode code    = 2;
    string         message = 3;
    RespData       data    = 4;
}

message HealthzReq {
    string seq = 1;
}

message HealthzResp {
    string                   seq     = 1;
    common.ErrCode           code    = 2;
    string                   message = 3;
    common.ModuleHealthzInfo data    = 4;
}
